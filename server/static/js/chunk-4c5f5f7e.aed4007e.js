(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c5f5f7e"],{"02f4":function(t,e,a){var i=a("4588"),n=a("be13");t.exports=function(t){return function(e,a){var r,c,l=String(n(e)),s=i(a),o=l.length;return s<0||s>=o?t?"":void 0:(r=l.charCodeAt(s),r<55296||r>56319||s+1===o||(c=l.charCodeAt(s+1))<56320||c>57343?t?l.charAt(s):r:t?l.slice(s,s+2):c-56320+(r-55296<<10)+65536)}}},"0390":function(t,e,a){"use strict";var i=a("02f4")(!0);t.exports=function(t,e,a){return e+(a?i(t,e).length:1)}},1071:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-box"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title-bar"},[a("div",{staticClass:"back",on:{click:t.back}},[a("div",{staticClass:"icon"},[t._v("")]),a("span",[t._v("返回")])])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})]),a("div",{staticClass:"right"},[a("div",{staticClass:"icon-bar"},[a("span",{staticClass:"text-item script",class:{active:"info"==t.rightType},on:{click:function(e){t.rightType="info"}}},[t._v("信息")]),a("span",{staticClass:"text-item tag",class:{active:"tag"==t.rightType},on:{click:function(e){t.rightType="tag"}}},[t._v("标签")]),a("span",{staticClass:"text-item style",class:{active:"style"==t.rightType},on:{click:function(e){t.rightType="style"}}},[t._v("样式")]),a("span",{staticClass:"text-item script",class:{active:"script"==t.rightType},on:{click:function(e){t.rightType="script"}}},[t._v("脚本")])]),a("div",{staticClass:"right-content"},["info"===t.rightType?a("div",{staticClass:"info-bar"},[a("div",{staticClass:"info-bar-content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"text-input",attrs:{type:"text",placeholder:"请输入模板名称!"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.templateFile,expression:"templateFile"}],staticClass:"text-input",attrs:{type:"text",placeholder:"请输入文件名称!"},domProps:{value:t.templateFile},on:{input:function(e){e.target.composing||(t.templateFile=e.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.browser,expression:"browser"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.browser=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"兼容各种浏览器"}},[t._v("兼容各种浏览器")]),a("option",{attrs:{value:"兼容现代浏览器"}},[t._v("兼容现代浏览器")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.type=e.target.multiple?a:a[0]}}},t._l(t.info.type,function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.name))])}),0)]),a("WaterRipple",{staticClass:"send",attrs:{text:"发布"},on:{onClick:t.send}})],1):"tag"===t.rightType?a("editTag",{model:{value:t.control,callback:function(e){t.control=e},expression:"control"}}):"style"===t.rightType?a("div",{staticClass:"check-box"},[t._l(t.info.style,function(e,i){return a("div",{staticClass:"check-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkStyle,expression:"checkStyle"}],attrs:{type:"checkbox",id:"style"+i},domProps:{value:e.name,checked:Array.isArray(t.checkStyle)?t._i(t.checkStyle,e.name)>-1:t.checkStyle},on:{change:function(a){var i=t.checkStyle,n=a.target,r=!!n.checked;if(Array.isArray(i)){var c=e.name,l=t._i(i,c);n.checked?l<0&&(t.checkStyle=i.concat([c])):l>-1&&(t.checkStyle=i.slice(0,l).concat(i.slice(l+1)))}else t.checkStyle=r}}}),a("label",{staticClass:"text",attrs:{for:"style"+i}},[t._v(t._s(e.name))])])}),a("div",{staticClass:"clear"})],2):"script"===t.rightType?a("div",{staticClass:"check-box"},[t._l(t.info.script,function(e,i){return a("div",{staticClass:"check-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkScript,expression:"checkScript"}],attrs:{type:"checkbox",id:"script"+i},domProps:{value:e.name,checked:Array.isArray(t.checkScript)?t._i(t.checkScript,e.name)>-1:t.checkScript},on:{change:function(a){var i=t.checkScript,n=a.target,r=!!n.checked;if(Array.isArray(i)){var c=e.name,l=t._i(i,c);n.checked?l<0&&(t.checkScript=i.concat([c])):l>-1&&(t.checkScript=i.slice(0,l).concat(i.slice(l+1)))}else t.checkScript=r}}}),a("label",{staticClass:"text",attrs:{for:"script"+i}},[t._v(t._s(e.name))])])}),a("div",{staticClass:"clear"})],2):t._e()],1)])])},n=[],r=(a("7f7f"),a("bc3a")),c=a.n(r),l=a("79fa"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-tag-box"},[t._l(t.value,function(e,i){return t.value&&t.value.length>0?a("div",{staticClass:"tag-item"},[a("div",{staticClass:"label"},[t._v(t._s(e.label))]),a("div",{staticClass:"edit icon",on:{click:function(a){return t.showEditTagBox(e,i)}}},[t._v("")]),a("div",{staticClass:"delete icon",on:{click:function(a){return t.deleteTag(e,i)}}},[t._v("")])]):a("div",{staticClass:"empty"},[a("div",{staticClass:"icon"},[t._v("")]),a("p",[t._v("当前还没有标签哦")])])}),a("WaterRipple",{staticClass:"creat",attrs:{text:"添加标签"},on:{onClick:t.showAddBox}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddTagBox||null!==t.editTagID,expression:"showAddTagBox || editTagID !== null"}],staticClass:"add-tag-box"},[a("div",{staticClass:"close icon",on:{click:function(e){t.showAddTagBox=!1,t.editTagID=null}}},[t._v("")]),a("div",{staticClass:"add-box"},[a("div",{staticClass:"title-bar"},[t._v(t._s(t.showAddTagBox?"添加标签":"修改标签"))]),a("AutoEntry",{attrs:{name:"标签字段",type:String},model:{value:t.addTag.name,callback:function(e){t.$set(t.addTag,"name",e)},expression:"addTag.name"}}),a("SelectEntry",{attrs:{text:"标签类型",option:t.typeSelectList,def:"string"},model:{value:t.addTag.type,callback:function(e){t.$set(t.addTag,"type",e)},expression:"addTag.type"}}),a("SelectEntry",{attrs:{text:"标签模式",option:t.modelSelectList,def:"template"},model:{value:t.addTag.model,callback:function(e){t.$set(t.addTag,"model",e)},expression:"addTag.model"}}),a("AutoEntry",{attrs:{name:"标签名称",type:String},model:{value:t.addTag.label,callback:function(e){t.$set(t.addTag,"label",e)},expression:"addTag.label"}}),a("TextareaEntry",{attrs:{name:"标签数值"},model:{value:t.addTag.value,callback:function(e){t.$set(t.addTag,"value",e)},expression:"addTag.value"}}),t.showAddTagBox?a("WaterRipple",{staticClass:"add-tag",attrs:{text:"确定添加"},on:{onClick:t.addNewTag}}):a("WaterRipple",{staticClass:"add-tag",attrs:{text:"确定修改"},on:{onClick:t.editTag}})],1)])],2)},o=[],u=(a("6b54"),a("7618")),d=(a("a481"),a("5119")),p=a("1b9c"),v=a("efaa"),g={props:{value:Array},data:function(){return{editTagID:null,showAddTagBox:!1,typeSelectList:[{value:"string",text:"字符串"},{value:"array",text:"数组"},{value:"color",text:"颜色"},{value:"object",text:"对象"},{value:"number",text:"数字"}],modelSelectList:[{value:"template",text:"模板插值"},{value:"prop",text:"prop传值"}],addTag:{name:"",type:"string",label:"",value:"",model:"template"}}},components:{AutoEntry:d["a"],SelectEntry:p["a"],TextareaEntry:v["a"],WaterRipple:l["a"]},created:function(){console.log(this.value)},methods:{deleteTag:function(t,e){var a=this,i=window.confirm('确认删除 "'.concat(t.label,'" 这个标签吗!'));if(i){var n=JSON.parse(JSON.stringify(this.value));n.splice(e,1),c.a.post("https://owo.ink/changeControl",{id:this.$route.params.id,data:n}).then(function(t){0===t.data.err&&a.$emit("input",n)})}},editTag:function(){var t=this,e=JSON.parse(JSON.stringify(this.value));e[this.editTagID]=this.addTag,"array"!==this.addTag.type&&"object"!==this.addTag.type||(e[this.editTagID].value=e[this.editTagID].value.replace(/\r/g,""),e[this.editTagID].value=e[this.editTagID].value.replace(/\n/g,""),e[this.editTagID].value=e[this.editTagID].value.replace(/ /g,""),e[this.editTagID].value=e[this.editTagID].value.replace(/},]/g,"}]"),e[this.editTagID].value=e[this.editTagID].value.replace(/},}/g,"}}"),e[this.editTagID].value=e[this.editTagID].value.replace(/],]/g,"]]"),e[this.editTagID].value=JSON.parse(e[this.editTagID].value)),this.$emit("input",e),c.a.post("https://owo.ink/changeControl",{id:this.$route.params.id,data:e}).then(function(e){0===e.data.err&&(t.editTagID=null,alert("修改成功!"))})},showEditTagBox:function(t,e){var a=Object(u["a"])(t.value);"object"!==a&&"array"!==a||(t.value=JSON.stringify(t.value)),this.addTag=t,this.editTagID=e},addNewTag:function(){var t=this,e=JSON.parse(JSON.stringify(this.value));e||(e=[]);var a=JSON.parse(JSON.stringify(this.addTag));"array"===a.type||"object"===a.type?(a.value=a.value.replace(/\r/g,""),a.value=a.value.replace(/\n/g,""),a.value=a.value.replace(/ /g,""),a.value=a.value.replace(/},]/g,"}]"),a.value=a.value.replace(/],]/g,"]]"),a.value=a.value.replace(/},}/g,"}}"),a.value=JSON.parse(a.value)):"number"===a.type&&(a.value=parseInt(a.value)),e.push(a),c.a.post("https://owo.ink/changeControl",{id:this.$route.params.id,data:e}).then(function(a){0===a.data.err&&(t.addTag={name:"",type:"string",label:"",value:"",model:"template"},t.$emit("input",e),alert("添加成功!"),t.showAddTagBox=!1)})},showAddBox:function(){this.addTag={name:"",type:"string",label:"",value:"",model:"template"},window.getSelection().toString()&&(this.addTag.value=window.getSelection().toString()),this.showAddTagBox=!0}}},h=g,f=(a("608f"),a("2877")),m=Object(f["a"])(h,s,o,!1,null,"5dd49692",null),y=m.exports,x={name:"edit",data:function(){return{rightType:"info",info:{},name:"",templateFile:"",browser:"兼容各种浏览器",type:"header",value:"",control:[],checkStyle:[],checkScript:[]}},components:{editTag:y,WaterRipple:l["a"]},beforeCreate:function(){var t=this;"add"===this.$route.name?c.a.get("https://owo.ink/getInfo").then(function(e){t.info=e.data.data,t.type=t.$route.params.type}):c.a.get("https://owo.ink/getInfo?id=".concat(this.$route.params.id)).then(function(e){var a=e.data;t.info=a.data,a.templateInfo&&(t.name=a.templateInfo.name,t.checkStyle=JSON.parse(a.templateInfo.styleList),t.checkScript=JSON.parse(a.templateInfo.scriptList),t.templateFile=a.templateInfo.templateFile,t.value=a.fileData,t.type=a.templateInfo.type,t.control=JSON.parse(a.templateInfo.control))})},methods:{send:function(){var t={id:this.$route.params.id,name:this.name,templateFile:this.templateFile,styleList:this.checkStyle.length>0?'["'.concat(this.checkStyle.join('","'),'"]'):"[]",scriptList:this.checkScript.length>0?'["'.concat(this.checkScript.join('","'),'"]'):"[]",browser:this.browser,control:"[]",type:this.type,value:this.value};"add"===this.$route.name?c.a.post("https://owo.ink/saveTemplateFile",t).then(function(t){0===t.data.err&&window.history.back(-1)}):c.a.post("https://owo.ink/updataTemplateFile",t).then(function(t){0===t.data.err&&window.history.back(-1)})},back:function(){window.history.go(-1)}}},b=x,T=(a("e54d"),Object(f["a"])(b,i,n,!1,null,"f4bfe95c",null));e["default"]=T.exports},"214f":function(t,e,a){"use strict";a("b0c5");var i=a("2aba"),n=a("32e9"),r=a("79e5"),c=a("be13"),l=a("2b4c"),s=a("520a"),o=l("species"),u=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();t.exports=function(t,e,a){var p=l(t),v=!r(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),g=v?!r(function(){var e=!1,a=/a/;return a.exec=function(){return e=!0,null},"split"===t&&(a.constructor={},a.constructor[o]=function(){return a}),a[p](""),!e}):void 0;if(!v||!g||"replace"===t&&!u||"split"===t&&!d){var h=/./[p],f=a(c,p,""[t],function(t,e,a,i,n){return e.exec===s?v&&!n?{done:!0,value:h.call(e,a,i)}:{done:!0,value:t.call(a,e,i)}:{done:!1}}),m=f[0],y=f[1];i(String.prototype,t,m),n(RegExp.prototype,p,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"49b9":function(t,e,a){},"520a":function(t,e,a){"use strict";var i=a("0bfb"),n=RegExp.prototype.exec,r=String.prototype.replace,c=n,l="lastIndex",s=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t[l]||0!==e[l]}(),o=void 0!==/()??/.exec("")[1],u=s||o;u&&(c=function(t){var e,a,c,u,d=this;return o&&(a=new RegExp("^"+d.source+"$(?!\\s)",i.call(d))),s&&(e=d[l]),c=n.call(d,t),s&&c&&(d[l]=d.global?c.index+c[0].length:e),o&&c&&c.length>1&&r.call(c[0],a,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(c[u]=void 0)}),c}),t.exports=c},"5f1b":function(t,e,a){"use strict";var i=a("23c6"),n=RegExp.prototype.exec;t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var r=a.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"608f":function(t,e,a){"use strict";var i=a("49b9"),n=a.n(i);n.a},"6b54":function(t,e,a){"use strict";a("3846");var i=a("cb7c"),n=a("0bfb"),r=a("9e1e"),c="toString",l=/./[c],s=function(t){a("2aba")(RegExp.prototype,c,t,!0)};a("79e5")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?s(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?n.call(t):void 0)}):l.name!=c&&s(function(){return l.call(this)})},9905:function(t,e,a){},a481:function(t,e,a){"use strict";var i=a("cb7c"),n=a("4bf8"),r=a("9def"),c=a("4588"),l=a("0390"),s=a("5f1b"),o=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,function(t,e,a,h){return[function(i,n){var r=t(this),c=void 0==i?void 0:i[e];return void 0!==c?c.call(i,r,n):a.call(String(r),i,n)},function(t,e){var n=h(a,t,this,e);if(n.done)return n.value;var d=i(t),p=String(this),v="function"===typeof e;v||(e=String(e));var m=d.global;if(m){var y=d.unicode;d.lastIndex=0}var x=[];while(1){var b=s(d,p);if(null===b)break;if(x.push(b),!m)break;var T=String(b[0]);""===T&&(d.lastIndex=l(p,r(d.lastIndex),y))}for(var k="",S=0,w=0;w<x.length;w++){b=x[w];for(var C=String(b[0]),_=o(u(c(b.index),p.length),0),I=[],A=1;A<b.length;A++)I.push(g(b[A]));var $=b.groups;if(v){var E=[C].concat(I,_,p);void 0!==$&&E.push($);var N=String(e.apply(void 0,E))}else N=f(C,p,_,I,$,e);_>=S&&(k+=p.slice(S,_)+N,S=_+C.length)}return k+p.slice(S)}];function f(t,e,i,r,c,l){var s=i+t.length,o=r.length,u=v;return void 0!==c&&(c=n(c),u=p),a.call(l,u,function(a,n){var l;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(s);case"<":l=c[n.slice(1,-1)];break;default:var u=+n;if(0===u)return a;if(u>o){var p=d(u/10);return 0===p?a:p<=o?void 0===r[p-1]?n.charAt(1):r[p-1]+n.charAt(1):a}l=r[u-1]}return void 0===l?"":l})}})},b0c5:function(t,e,a){"use strict";var i=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},e54d:function(t,e,a){"use strict";var i=a("9905"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-4c5f5f7e.aed4007e.js.map